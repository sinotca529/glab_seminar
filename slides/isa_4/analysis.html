<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Define sound analysis - glab_seminar</title>
        <!-- Custom HTML head -->
<script type="text/javascript">
    window.MathJax = {
        tex: {
            tags: 'ams',
            inlineMath: [['$', '$'], ['\\(', '\\)']],
            macros: {
                grad: "{\\nabla}",
                llangle: "{\\langle\\!\\langle}",
                rrangle: "{\\rangle\\!\\rangle}",
                bm: ["{\\boldsymbol{#1}}", 1],
            }
        }
    };
</script>
<script type="text/javascript" id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../theme/custom.css">
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="../../index.html">Home</a></li><li class="chapter-item expanded "><a href="../../slides/slides.html">輪講</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../slides/isa_4/main.html">ISA Ch.4 (2021/8/24)</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../slides/isa_4/concrete.html">Concrete semantics</a></li><li class="chapter-item "><a href="../../slides/isa_4/abstract.html">Abstract semantics</a></li><li class="chapter-item expanded "><a href="../../slides/isa_4/analysis.html" class="active">Define sound analysis</a></li><li class="chapter-item "><a href="../../slides/isa_4/summary.html">Summary</a></li><li class="chapter-item "><a href="../../slides/isa_4/ex_framework.html">Example of the framework</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <button id="expand-button" class="icon-button" type="button" title="Change contents' width">
                            <i class="fa fa-expand"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">glab_seminar</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="define-sound-analysis"><a class="header" href="#define-sound-analysis">Define sound analysis</a></h1>
<h2 id="steps"><a class="header" href="#steps">Steps</a></h2>
<ol>
<li>Make assumptions for soundness</li>
<li>Define sound static analysis (in math form)</li>
<li>Check soundness</li>
<li>Implement the analysis (pseudo code)</li>
</ol>
<h2 id="14-make-assumptions-for-soundness"><a class="header" href="#14-make-assumptions-for-soundness">[1/4] Make assumptions for soundness</a></h2>
<h3 id="mathbbssharp-is-cpo"><a class="header" href="#mathbbssharp-is-cpo">$\mathbb{S^\sharp}$ is CPO</a></h3>
<p>We assume an abstract domain $\mathbb{S}^\sharp$ is CPO.</p>
<blockquote>
<p><strong>Def. CPO (complete partial order)</strong></p>
<p>A partial order $E$ is CPO when $E$ satisfies:</p>
<ul>
<li>$E$ has infimum (bottom, $\bot$) and,</li>
<li>Any totally ordered subset of $E$ (called <strong>chain</strong>) has a least upper bound in $E$
<ul>
<li>$\omega$-chain ($\simeq$ infinite length chain) is included</li>
</ul>
</li>
</ul>
<div style="text-align: center">
<p><img src="./fig/cpo.drawio.svg" alt="" /></p>
</div>
</blockquote>
<blockquote>
<p><strong>[Note]</strong></p>
<p>Different structures other than the CPO can also be used (ex. $\sqcup$-semilattices)</p>
</blockquote>
<h3 id="abstract-domain-by-galois-connection"><a class="header" href="#abstract-domain-by-galois-connection">Abstract domain by galois connection</a></h3>
<p>An abstract domain needs to preserve the partial order of the concrete domain.
Galois connection capture this concept.</p>
<p>We design an abstract domain as a CPO that is Galois connection with the concrete domain.</p>
<p>$$
\begin{align}
(\underset{{\Large\wp}(\mathbb{S})}{\underline{{\Large\wp}(\mathbb{L}\times\mathbb{M})}}, \subseteq)
\overset{\gamma}{\underset{\alpha}{\leftrightarrows}}
(\underset{\mathbb{S}^\sharp}{\underline{(\mathbb{L} \rightarrow \mathbb{M}^\sharp)}}, \sqsubseteq)
\end{align}
$$</p>
<p>where:</p>
<ul>
<li>
<p>The partial order $\sqsubseteq$ is the label-wise order:
$$
\begin{align}
a^\sharp \sqsubseteq b^\sharp \iff \forall l \in \mathbb{L} : a^\sharp(l) \sqsubseteq_M b^\sharp(l)
\end{align}
$$</p>
</li>
<li>
<p>$\alpha$ defines how each element in the concrete domain is abstracted.</p>
</li>
<li>
<p>$\gamma$ defines how each element in the abstract domain is concretized.</p>
</li>
</ul>
<blockquote>
<p><strong>Def. 3.5 (Galois connection)</strong></p>
<p>If $\mathbb{C}$ and $\mathbb{A}$ satisfies
$$
\begin{align}
\forall (c, a) \in (\mathbb{C}, \mathbb{A}), \quad \alpha(c) \sqsubseteq a \iff c \subseteq \gamma(a)
\end{align}
$$</p>
<p>then, tha pair of $\mathbb{C}$ and $\mathbb{A}$ is a Galois connection and we write :
$$
\begin{align}
(\mathbb{C}, \subseteq) \overset{\gamma}{\underset{\alpha}{\leftrightarrows}} (\mathbb{A}, \sqsubseteq)
\end{align}
$$</p>
</blockquote>
<blockquote>
<p><strong>[Note]</strong></p>
<p>Different structures other than the Galois connection can also be used.</p>
</blockquote>
<p>The above Galois connection can be understood as the composition of two Galois connections:
$$
\begin{align}
({\Large\wp}(\mathbb{L}\times\mathbb{M}), \subseteq)
&amp;\overset{\gamma_0}{\underset{\alpha_0}{\leftrightarrows}} ((\mathbb{L} \rightarrow {\Large\wp}(\mathbb{M})), \sqsubseteq)
&amp;&amp; (\sqsubseteq \text{ is the label-wise } \subseteq)\\
&amp;\overset{\gamma_1}{\underset{\alpha_1}{\leftrightarrows}} ((\mathbb{L} \rightarrow \mathbb{M}^\sharp), \sqsubseteq)
&amp;&amp; (\sqsubseteq \text{ is the label-wise } \sqsubseteq_{M})
\end{align}
$$</p>
<h4 id="the-first-part"><a class="header" href="#the-first-part">The first part</a></h4>
<p>$$
({\Large\wp}(\mathbb{L}\times\mathbb{M}), \subseteq)
\overset{\gamma_0}{\underset{\alpha_0}{\leftrightarrows}} ((\mathbb{L} \rightarrow {\Large\wp}(\mathbb{M})), \sqsubseteq)
\quad (\sqsubseteq \text{ is the label-wise } \subseteq)\\
$$</p>
<ul>
<li>
<p>Collects the memories for each label :
$$
\alpha_0 \left\{
\begin{array}{l}
(0, m_0), (0, m'_0), \cdots,\\
(1, m_1), (1, m'_1), \cdots,\\
\vdots\\
(n, m_n), (n, m'_n), \cdots,
\end{array}
\right\} = \left\{
\begin{array}{l}
(0, \{m_0, m'_0, \cdots\}),\\
(1, \{m_1, m'_1, \cdots\}),\\
\vdots\\
(n, \{m_n, m'_n, \cdots\}),
\end{array}
\right\}
$$</p>
</li>
<li>
<p>$\alpha_0 \circ \gamma_0 \equiv \text{id}$</p>
</li>
<li>
<p>This relation satisfies the conditions of Galois connection.</p>
</li>
</ul>
<h4 id="the-second-part"><a class="header" href="#the-second-part">The second part</a></h4>
<p>$$
((\mathbb{L} \rightarrow {\Large\wp}(\mathbb{M})), \sqsubseteq)
\overset{\gamma_1}{\underset{\alpha_1}{\leftrightarrows}} ((\mathbb{L} \rightarrow \mathbb{M}^\sharp), \sqsubseteq)
\quad (\sqsubseteq \text{ is the label-wise } \sqsubseteq_{M})
$$</p>
<ul>
<li>This second Galois connection pair boils down to :
$$
\begin{align}
({\Large\wp}(\mathbb{M}), \subseteq) \overset{\gamma_1}{\underset{\alpha_1}{\leftrightarrows}} (\mathbb{M}^\sharp, \sqsubseteq_M) \label{eq:abst_m}
\end{align}
$$</li>
</ul>
<blockquote>
<p>So, we can define $\mathbb{S}^\sharp$ which Galois connection with the concrete domain by defining $\mathbb{M}^\sharp$ which satisfy $\eqref{eq:abst_m}$</p>
</blockquote>
<h3 id="assumption-for-hookrightarrowsharp-cupsharp-and-cup_msharp"><a class="header" href="#assumption-for-hookrightarrowsharp-cupsharp-and-cup_msharp">Assumption for $\hookrightarrow^\sharp$, $\cup^\sharp$ and $\cup_M^\sharp$</a></h3>
<p>The abstract one-step transition relation $\hookrightarrow^\sharp$ must satisfy, as a function :
$$
\begin{align}
\breve{\Large\wp}(\hookrightarrow) \circ \gamma \subseteq \gamma \circ \breve{\Large\wp}(\hookrightarrow^\sharp)
\end{align}
$$</p>
<div style="text-align: center">
<p><img src="./fig/sound_abs_trans.drawio.svg" alt="Figure 4.2" /></p>
</div>
<p>The abstract union $\cup^\sharp$ and $\cup_M^\sharp$ must satisfy :
$$
\begin{align}
\cup \circ (\gamma \_ , \gamma \_ ) \subseteq \gamma \_ \circ \cup^\sharp \_
\end{align}
$$</p>
<div style="text-align: center">
<p><img src="./fig/sound_abs_union.drawio.svg" alt="Figure 4.2b" /></p>
</div>
<h2 id="24-define-sound-static-analysis-in-math-form"><a class="header" href="#24-define-sound-static-analysis-in-math-form">[2/4] Define sound static analysis (in math form)</a></h2>
<h3 id="case-1"><a class="header" href="#case-1">Case 1.</a></h3>
<p>If $\mathbb{S}^\sharp$ is of finite height (every chain is finite) and $F^\sharp$ is monotone or extensive,</p>
<p>the analysis computes:
$$
\begin{align}
\bigsqcup_{i\geq 0} F^{\sharp^i}(\bot)
\end{align}
$$</p>
<blockquote>
<p><strong>Def. Extensive</strong></p>
<p>A function $f : E \rightarrow E$ is extensive iff:
$$
\forall x \in E, \quad x \preceq f(x)
$$</p>
</blockquote>
<h3 id="case-2"><a class="header" href="#case-2">Case 2.</a></h3>
<p>Otherwise,</p>
<p>the analysis computes:
$$
\begin{align}
Y_{\text{lim}} \ \ (= Y_{\infty})
\end{align}
$$</p>
<p>where
$$
\begin{align}
Y_0 &amp;= \bot\\
Y_{i+1} &amp;= Y_i \triangledown F^\sharp(Y_i)
\end{align}
$$</p>
<p>$\triangledown$ is a widening operator</p>
<blockquote>
<p><strong>Def. 3.11 (Widening operator)</strong></p>
<p>A widening operator over an abstract domain $\mathbb{A}$ is a binary operator $\triangledown$, such that:
$$
\begin{align}
\forall a_0, a_1 \in \mathbb{A} :\quad \gamma(a_0) \cup \gamma(a_1) \subseteq \gamma(a_0 \triangledown a_1)\\
\end{align}
$$</p>
<p>and</p>
<p>For all sequences $\{ a_n \}$, the sequence $\{ a'_n \}$ defined below is ultimately stationary:
$$
\left\{
\begin{array}{ll}
a'_0 &amp;= a_0\\
a'_{n+1} &amp;= a_n' \triangledown a_{n+1}
\end{array}
\right.
$$</p>
</blockquote>
<h2 id="34-check-soundness"><a class="header" href="#34-check-soundness">[3/4] Check soundness</a></h2>
<h3 id="theorem-42-sound-static-analysis-by-fsharp"><a class="header" href="#theorem-42-sound-static-analysis-by-fsharp">Theorem 4.2 (Sound static analysis by $F^\sharp$)</a></h3>
<p>Given a program, $F$, $F^\sharp$ (defined as above),</p>
<p>If</p>
<ul>
<li>$\mathbb{S}^\sharp$ is of finite height (every chain $\mathbb{S}^\sharp$ is finite) and</li>
<li>$F^\sharp$ is monotone or extensive</li>
</ul>
<p>Then:
$$
\begin{align}
\bigsqcup_{i \geq 0} F^{\sharp^i} (\bot)
\end{align}
$$</p>
<p>is finitely computable and over-approximates $\textbf{lfp} F$ (= concrete semantics)
$$
\begin{align}
\textbf{lfp} F \subseteq \gamma\left(\bigsqcup_{i \geq 0} F^{\sharp^i} (\bot)\right)
\end{align}
$$</p>
<!-- \left( \iff \alpha (\textbf{lfp}F) \sqsubseteq \bigsqcup_{i \geq 0} F^{\sharp^i} (\bot) \right) -->
<details style="background-color: var(--quote-bg);">
<summary>Proof</summary>
<h4 id="overview"><a class="header" href="#overview">Overview</a></h4>
<p>$$
\begin{align}
\text{The condition}
&amp;\implies F \circ \gamma \subseteq \gamma \circ F^\sharp \label{eq:b1}\\
&amp;\implies \forall n \geq 0 : F^n(\bot) \subseteq \gamma(F^{\sharp^n}(\bot)) \label{eq:b2}\\
&amp;\implies \textbf{lfp}F \subseteq \gamma\left(\bigsqcup_{i \geq 0} F^{\sharp^i}(\bot)\right) \label{eq:b3}
\end{align}
$$</p>
<h4 id="proof-eqrefeqb1"><a class="header" href="#proof-eqrefeqb1">Proof $\eqref{eq:b1}$</a></h4>
<p>$$F \circ \gamma \subseteq \gamma \circ F^\sharp$$</p>
<p>From the condition:
$$
\begin{align}
\textit{Step} \circ \gamma
&amp;= \breve{\Large\wp}(\hookrightarrow) \circ \gamma\\
&amp;\subseteq \gamma \circ \breve{\Large\wp}(\hookrightarrow^\sharp) &amp;&amp;\text{by the condition of} \hookrightarrow^\sharp\\
&amp;\subseteq \gamma \circ {\Large\wp}((\text{id}, \cup^\sharp_M)) \circ \pi \circ \breve{\Large\wp}(\hookrightarrow^\sharp) &amp;&amp;\text{by the monotonicity of} \gamma\\
&amp;= \gamma \circ \textit{Step}^\sharp \label{eq:b1-1}
\end{align}
$$</p>
<p>Then:
$$
\begin{align}
(\gamma \circ F^\sharp)
&amp;= \gamma(\alpha(I) \cup^\sharp \textit{Step}^\sharp(X))\\
&amp;\supseteq (\gamma\circ\alpha)I \cup (\gamma\circ\textit{Step}^\sharp)(X) &amp;&amp;\text{by the condition of } \cup^\sharp\\
&amp;\supseteq I \cup (\textit{Step}\circ\gamma)(X) &amp;&amp;\text{by} \eqref{eq:b1-1} \text{ and id} \subseteq \gamma\circ\alpha\\
&amp;= (F\circ\gamma)(X)
\end{align}
$$</p>
<h4 id="proof-eqrefeqb2"><a class="header" href="#proof-eqrefeqb2">Proof $\eqref{eq:b2}$</a></h4>
<p>$$\forall n \geq 0 : F^n(\bot) \subseteq \gamma(F^{\sharp^n}(\bot))$$</p>
<p>Use induction on $n$.</p>
<h5 id="step-1-n--0"><a class="header" href="#step-1-n--0">step 1: $n = 0$</a></h5>
<p>$$\bot \subseteq \gamma(\bot)$$
is OK.</p>
<h5 id="step-2-assume-fkbot-subseteq-gammafsharpkbot"><a class="header" href="#step-2-assume-fkbot-subseteq-gammafsharpkbot">step 2: assume $F^k(\bot) \subseteq \gamma(F^{\sharp^k}(\bot))$</a></h5>
<p>$$
\begin{align}
F(F^k(\bot))
&amp;\subseteq F(\gamma(F^{\sharp^k})(\bot)) &amp;&amp; \text{by assumption}\\
&amp;\subseteq \gamma(F^\sharp(F^{\sharp^k}(\bot))) &amp;&amp; \text{by } F \circ \gamma \subseteq \gamma \circ F^\sharp
\end{align}
$$</p>
<h4 id="proof-eqrefeqb3"><a class="header" href="#proof-eqrefeqb3">Proof $\eqref{eq:b3}$</a></h4>
<p>$$\textbf{lfp}F = \bigsqcup_{i \geq 0} F^i \subseteq \gamma(\bigsqcup_{i \geq 0} F^{\sharp^i}(\bot))$$</p>
<h5 id="existence-of-quad-textbflfpf-quad-bigsqcup_i-geq-0-gammafsharpibot"><a class="header" href="#existence-of-quad-textbflfpf-quad-bigsqcup_i-geq-0-gammafsharpibot">Existence of $\quad \textbf{lfp}F, \quad \bigsqcup_{i \geq 0} \gamma(F^{\sharp^i}(\bot))$</a></h5>
<p>$\bigsqcup_{i \geq 0} F^i$ is exist because:</p>
<ul>
<li>A sequence $\{ F^i(\bot) \}$ is a chain in CPO ${\Large\wp}(\mathbb{S})$</li>
</ul>
<p>$\bigsqcup_{i \geq 0} \gamma(F^{\sharp^i}(\bot))$ is exist because:</p>
<ul>
<li>A sequence $\{ F^{\sharp^i}(\bot) \}$ is a chain and $\gamma$ is monotone.</li>
<li>→ sequence $\{ \gamma(F^{\sharp^i}(\bot)) \}$ is a chain in CPO $\mathbb{S}^\sharp$</li>
</ul>
<h5 id="proof"><a class="header" href="#proof">proof:</a></h5>
<p>$$
\begin{align}
\bigsqcup_{i\geq 0} F^i(\bot)
&amp;\subseteq \bigsqcup_{i\geq 0} \gamma(F^{\sharp^i}(\bot))\\
&amp;\subseteq \gamma(\bigsqcup_{i\geq 0} F^{\sharp^i}(\bot)) &amp;&amp; \text{by the monotonicity of } \gamma
\end{align}
$$</p>
<p>(monotonic $\implies$ continuous)</p>
</details>
<h3 id="theorem-43-sound-static-analysis-by-fsharp-and-triangledown"><a class="header" href="#theorem-43-sound-static-analysis-by-fsharp-and-triangledown">Theorem 4.3 (Sound static analysis by $F^\sharp$ and $\triangledown$)</a></h3>
<p>Given a program, $F$, $F^\sharp$  (defined as above), $\triangledown$ (defined in definition 3.11):</p>
<p>Then the following chain $Y_0 \sqsubseteq Y_1 \sqsubseteq \cdots$
$$
\begin{align}
Y_0 &amp;= \bot\\
Y_{i+1} &amp;= Y_i \triangledown F^\sharp(Y_i)
\end{align}
$$</p>
<p>is finite, and its last element $Y_{\text{lim}}$ over-approximates $\textbf{lfp} F$:
$$
\begin{align}
\textbf{lfp} F \subseteq \gamma(Y_{\text{lim}})
\end{align}
$$</p>
<details style="background-color: var(--quote-bg);">
<summary>Proof</summary>
<h4 id="overview-1"><a class="header" href="#overview-1">Overview</a></h4>
<ol>
<li>Prove a sequence $\{ Y_i \}$ is a chain.</li>
<li>Prove $\forall n \geq 0,\quad \bigcup_{i=0}^n F^i (\bot) \subseteq \gamma(Y_n)$</li>
<li>Prove $\textbf{lfp} F = \bigcup_{i=0}^{\infty} F^i (\bot) \subseteq \gamma(Y_{\text{lim}})$</li>
</ol>
<h4 id="step1---y_i--is-a-chain"><a class="header" href="#step1---y_i--is-a-chain">Step1 : $\{ Y_i \}$ is a chain</a></h4>
<p>From the definition of $\triangledown$ (Def. 3.11)
$$
\begin{align}
\gamma(a) \cup \gamma(b) \subseteq \gamma(a \triangledown b) \label{eq:t4.3-1}
\end{align}
$$</p>
<p>Thus, for all $a, b$:
$$
\begin{align}
a \triangledown b
&amp;\sqsupseteq\alpha (\gamma(a) \cup \gamma(b)) &amp;&amp;(\because \text{by Galois connection and } \eqref{eq:t4.3-1})\\
&amp;\sqsupseteq \alpha(\gamma(a)) &amp;&amp;(\because \alpha \text{ is monotone})\\
&amp;\sqsupseteq a &amp;&amp; (\because \text{id} \sqsubseteq \alpha\circ\gamma)
\end{align}
$$</p>
<p>So, the sequence $\{ Y_i \}$ is a chain because:
$$
\begin{align}
\forall k,\quad Y_k \sqsubseteq Y_{k+1} = Y_k \triangledown F^\sharp(Y_k)
\end{align}
$$</p>
<h4 id="step2--forall-n-geq-0quad-bigcup_i0n-fi-bot-subseteq-gammay_n"><a class="header" href="#step2--forall-n-geq-0quad-bigcup_i0n-fi-bot-subseteq-gammay_n">Step2 : $\forall n \geq 0,\quad \bigcup_{i=0}^n F^i (\bot) \subseteq \gamma(Y_n)$</a></h4>
<p>Use induction on $n$.</p>
<ul>
<li>The case $n=0$ is obvious.</li>
<li>Assume about $n=k$ and think about $k+1$
$$
\begin{align}
\bigcup_{i=0}^{k+1} F^i(\bot)
&amp;= \bigcup_{i=0}^k F^i(\bot) \cup F^{k+1}(\bot)\\
&amp;\subseteq \gamma(Y_k) \cup F^{k+1}(\bot) &amp;&amp; \text{by induction hypothesis}\\
&amp;= \gamma(Y_k) \cup F(F^k(\bot))\\
&amp;\subseteq \gamma(Y_k) \cup F(\bigcup_{i=0}^k F^i(\bot)) &amp;&amp; \because F \text{ is monotone}\\
&amp;\subseteq \gamma(Y_k) \cup F(\gamma(Y_k)) &amp;&amp; \text{by induction hypothesis}\\
&amp;\subseteq \gamma(Y_k) \cup \gamma(F^\sharp(Y_k)) &amp;&amp; \because F \circ \gamma \subseteq \gamma \circ F^\sharp\\
&amp;\subseteq \gamma(Y_k \triangledown F^\sharp(Y_k)) &amp;&amp; \text{by the condition of } \triangledown\\
&amp;= \gamma(Y_{k+1})
\end{align}
$$</li>
</ul>
<h4 id="step3--textbflfp-f--bigcup_i0infty-fi-bot-subseteq-gammay_textlim"><a class="header" href="#step3--textbflfp-f--bigcup_i0infty-fi-bot-subseteq-gammay_textlim">Step3 : $\textbf{lfp} F = \bigcup_{i=0}^{\infty} F^i (\bot) \subseteq \gamma(Y_{\text{lim}})$</a></h4>
<p>From the definition of $\triangledown$ (Def. 3.11), $\{ Y_i \}$ is ultimately stationary.</p>
<p>Let the last element be $Y_{\text{lim}}$.</p>
<p>By Step1 and Step2,
$$
\begin{align}
\forall n \geq 0,\quad \bigcup_{i=0}^n F^i (\bot) \subseteq \gamma(Y_n) \subseteq \gamma(Y_{\text{lim}})
\end{align}
$$</p>
<p>hence,
$$
\begin{align}
\textbf{lfp} F = \bigcup_{i=0}^{\infty} F^i (\bot) \subseteq \gamma(Y_{\text{lim}})
\end{align}
$$</p>
</details>
<h2 id="implement-the-analysis-pseudo-code"><a class="header" href="#implement-the-analysis-pseudo-code">Implement the analysis (pseudo code)</a></h2>
<h3 id="naive-algorithm"><a class="header" href="#naive-algorithm">Naive algorithm</a></h3>
<p>Algorithm without widening</p>
<pre><code>C ← ⊥
repeat
    R ← C
    C ← F#(C)
until C ⊑ R
return R
</code></pre>
<p>Algorithm with widening</p>
<pre><code>C ← ⊥
repeat
    R ← C
    C ← C ▽ F#(C)
until C ⊑ R
return R
</code></pre>
<h3 id="bottleneck"><a class="header" href="#bottleneck">Bottleneck</a></h3>
<p><code>F#</code> may be a bottleneck because it applies $\hookrightarrow^\sharp$ to the state at every label in the program.</p>
<blockquote>
<p>$$
\begin{align*}
F^\sharp &amp;= \alpha(I) \cup^\sharp \textit{Step}^\sharp(X^\sharp)\\
\textit{Step}^\sharp &amp;= {\Large\wp}((\text{id}, \cup^\sharp_M)) \circ \pi \circ \breve{\Large\wp}(\hookrightarrow^\sharp)
\end{align*}
$$</p>
</blockquote>
<h3 id="improvement"><a class="header" href="#improvement">Improvement</a></h3>
<p>Idea : Update only labels which are updated the previous step.</p>
<pre><code>C : L → M#
F# : (L → M#) → (L → M#)
WorkList : P(L)

WorkList ← L
C ← ⊥
repeat
    R ← C
    C ← C ▽ F#(C.filter_by(WorkList))
    WorkList ← {l | C(l) ⊐ R(l), l ∈ L}
until WorkList.is_empty()
return R
</code></pre>
<blockquote>
<p>More simple description (?)</p>
<pre><code>C ← ⊥
R ← ⊥
repeat
    C ← C ▽ F#(C\R)
    R ← C
until (C\R).is_empty()
return R
</code></pre>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../slides/isa_4/abstract.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../../slides/isa_4/summary.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../slides/isa_4/abstract.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../../slides/isa_4/summary.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="../../theme/custom.js"></script>
    </body>
</html>
